# Golioth client Python library

This is a basic Golioth client library.

## Install

This package is not yet published in PyPI. It can be installed directly from GitHub with
the following command:

``` sh
pip install git+https://github.com/golioth/python-golioth-tools@v0.1.0
```

Alternatively you can clone this repo and then run the following at the repo root:

``` sh
pip install .
```

If you plan on editing / development of this package, consider using `-e` (`--editable`) parameter
when installing it.

### Configuration

`golioth` client library is just complementary tool to `goliothctl` (for now). Hence
it uses its configuration format. `goliothctl` default configuration file is at
`~/.golioth/.goliothctl.yaml`.

#### Default hosted (`api.golioth.io`) backend

`golioth` tool can reuse credentials stored in `goliothctl`'s `~/.golioth/.goliothctl.yaml`
configuration file. Make sure that `goliothctl` is already logged in with:

``` sh
$ goliothctl login
```

If that is true, then `golioth` CLI will reuse such access token for authorization.

#### Default hosted (`api.golioth.io`) backend - using API key

An alternative approach is to use generated API keys. This can be achieved with `goliothctl apikeys
create`:

``` sh
$ goliothctl apikeys create
id:"SOME_ID"  key:"MY_KEY" type:API_KEY
```

or an existing key can be listed at any point with:

``` sh
$ goliothctl apikeys list
id:"SOME_ID"  key:"MY_KEY"  policy_id:"SOME_POLICY_ID"  roles:"apikey" type:API_KEY
```

Then pass the API key as an argument when creating the client. `--api-key MY_KEY`. As an example:

``` python
from golioth import Client

API_KEY="ABCDEF1234567890"
client = Client(api_key = API_KEY)
```

#### Self-hosted backend

With self-hosted backend there is no API key authentication required by default. However a separate
configuration file might be useful with following contents:

``` yaml
apiurl: http://localhost:9090
projectid: one
```

assuming that self-hosted Golioth server runs on `localhost` using port `9090`.
`project: one` defines default project to be used. Such configuration is exactly
what is generated by running:

``` sh
goliothctl --apiUrl "http://localhost:9090" config set projectId one
```

when using `goliothctl`. Above configuration file can be used both with
`goliothctl -c myconfig.yaml` or with this package: `client = Client(config_path='myconfig.yaml')`.
